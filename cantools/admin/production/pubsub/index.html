<!doctype html><html><head><title>admin - pubsub</title><link rel="stylesheet" href="/css/ct.css"><link rel="stylesheet" href="/css/style.css"> <script>var CT={"_":{"vals":{},"extReqs":{},"scriptImportCb":{},"onImport":function(fullpath){CT._.scriptImportCb[fullpath].forEach(function(cb){cb();});},"triggerOnload":function(n){(n||window)._ct_onload.forEach(function(cb){cb();});}},"info":{"page":location.pathname.slice(1,-5),"userAgent":navigator.userAgent||navigator.vendor||window.opera},"net":{"_path":"","_mode":"ct","_retry":0,"_cache":false,"_encode":true,"_spinner":false,"_scrambler":"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ+/=_","_scramble":function(s){var s2="",sl=s.length,i,z,c=CT.net._scrambler,cl=c.length,chl=cl/2;for(i=0;i<sl;i++){z=c.indexOf(s[i]);if(z==-1)
s2+=s[i];else
s2+=c[(z+chl)%cl];}
return s2;},"_encoder":function(d){return CT.net._scramble(btoa(d));},"_decoder":function(d){return atob(CT.net._scramble(d));},"_silentFail":true,"setRetry":function(val){CT.net._retry=val;},"setMode":function(mode){if(mode!="ct"&&mode!="basic"&&mode!="passthrough"){CT.log("CT.net.setMode() - illegal mode specified: "+mode);CT.log("mode must be one of: 'ct', 'basic', 'passthrough'");}else
CT.net._mode=mode;},"setSilentFail":function(bool){CT.net._silentFail=bool;},"setScrambler":function(s){CT.net._scrambler=s;},"setSpinner":function(bool){CT.net._spinner=bool;},"setCache":function(bool){CT.net._cache=bool;},"setEncoder":function(func){CT.net._encoder=func;},"setDecoder":function(func){CT.net._decoder=func;},"fullPath":function(p){if(!CT.net._path){var s=document.getElementsByTagName("script");for(var i=0;i<s.length;i++){if(s[i].src.slice(-8)=="CT/ct.js"){CT.net._path=s[i].src.replace("CT/ct.js","");break;}}
CT.net._path=CT.net._path||"/";}
return CT.net._path+p;},"xhr":function(path,method,params,async,cb,headers,passthrough,noct,responseType){var xhr=window.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");xhr.open(method,path,async);if(responseType)
xhr.responseType=responseType;if(!(headers&&"Content-Type"in headers))
xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var header in headers)
xhr.setRequestHeader(header,headers[header]);xhr.onreadystatechange=cb&&function(){(xhr.readyState==4)&&cb(xhr);};if(params){if(!passthrough&&CT.net._mode!="passthrough"){if(!noct&&CT.net._mode=="ct")
params=CT.net._rd(params,true);params=JSON.stringify(params);}
if(CT.net._encode&&!(params instanceof FormData||path.startsWith("http")))
params=CT.net._encoder(params);}
xhr.send(params);if(!async)
return xhr.responseText;},"_fallback_error":function(msg){if(CT.net._silentFail)
CT.log(msg);else
alert(msg);},"_u2l":function(s){return btoa(encodeURIComponent(s));},"_l2u":function(s){return decodeURIComponent(atob(s));},"_rd":function(d,enc){if(d){if(typeof d=="string")
return CT.net[(enc?"_u2l":"_l2u")](d);if(typeof d=="object"){var k,o=Array.isArray(d)?[]:{};for(k in d)
o[k]=CT.net._rd(d[k],enc);return o;}}
return d;},"_ctsuccess":function(data,signature,b64){var pl=JSON.parse(data);if(b64)pl=CT.net._rd(pl);if(CT.net._cache&&signature)
CT.storage.set(signature,pl);return pl;},"_ctresponse":function(data,signature,noenc){if(CT.net._encode&&!noenc)
data=CT.net._decoder(data);var code=data.charAt(0),result={success:!!(code%2)};data=data.slice(1);if(code=="2"||code=="3")
result.data=CT.net._rd(data);else if(result.success)
result.data=CT.net._ctsuccess(data,signature,code=="3");else
result.data=data;return result;},"_xhrcb":function(path,cb,eb,cbarg,ebarg,errMsg,signature,_500as200,noct,spinner,basic){if(CT.net._spinner||spinner){CT.net._spinner_node=CT.net._spinner_node||CT.dom.spinner();document.body.appendChild(CT.net._spinner_node);}
cb=cb||function(){};eb=eb||function(payload){CT.net._fallback_error((errMsg||"error")+": "+payload);};return function(xhr){if(xhr.status==200||(_500as200&&xhr.status==500)){if(CT.net._spinner||spinner)
CT.dom.remove(CT.net._spinner_node);var data=xhr.responseType=="blob"?xhr.response:xhr.responseText.trim();if(basic||CT.net._mode=="basic")
cb(data,cbarg);else if(!noct&&CT.net._mode=="ct"){var result=CT.net._ctresponse(data,signature,path.startsWith("http"));if(result.success)
cb(result.data,cbarg);else
eb(result.data,ebarg);}else
cb(CT.net._ctsuccess(data,signature),cbarg);}else
eb("request to "+path+" failed! ("+xhr.status+" - "+xhr.responseText+")",ebarg);};},"formData":function(data,params,dname){var fd=new FormData();if(params)for(var param in params)
fd.append(param,params[param]);fd.append(dname||"data",data);return fd;},"formUp":function(data,opts,dname){opts.params=CT.net.formData(data,opts.params,dname);opts.passthrough=true;opts.headers=opts.headers||{};opts.headers["Content-Type"]="multipart/form-data";return CT.net.post(opts);},"post":function(path,params,errMsg,cb,eb,headers,cbarg,ebarg,sync,passthrough,noct,spinner,basic,responseType,retry){if(arguments.length==1&&typeof arguments[0]!="string"){var obj=arguments[0];path=obj.path;params=obj.params;errMsg=obj.errMsg;cb=obj.cb;eb=obj.eb;headers=obj.headers;cbarg=obj.cbarg;ebarg=obj.ebarg;sync=obj.sync;passthrough=obj.passthrough;noct=obj.noct;spinner=obj.spinner;basic=obj.basic;responseType=obj.responseType;retry=obj.retry;}
var signature;if(CT.net._cache){signature=path+JSON.stringify(params);var cachedVersion=CT.storage.get(signature);if(cachedVersion)
return cb(cachedVersion,cbarg);}
retry=retry||CT.net._retry;if(retry&&retry==CT.net._retry){var origEb=eb;eb=function(msg){retry-=1;if(retry)
setTimeout(CT.net.post,(CT.net._retry-retry)*1000,path,params,errMsg,cb,eb,headers,cbarg,ebarg,sync,passthrough,noct,spinner,basic,responseType,retry);else
origEb&&origEb(msg);};}
return CT.net.xhr(path,"POST",params,!sync,CT.net._xhrcb(path,cb,eb,cbarg,ebarg,errMsg,signature,null,noct,spinner,basic),headers,passthrough,noct,responseType);},"put":function(path,params,cb,headers,passthrough,_500as200,noct,spinner,basic){CT.net.xhr(path,"PUT",params,true,CT.net._xhrcb(path,cb,null,null,null,null,null,_500as200,noct,spinner,basic),headers,passthrough,noct);},"del":function(path,params,cb,headers){CT.net.xhr(path,"DELETE",params,true,CT.net._xhrcb(path,cb),headers);},"qs":function(path,qsp){path=path||"";if(qsp){var qs=[];for(var key in qsp)
qs.push(key+"="+escape(qsp[key]));path+="?"+qs.join("&");}
return path;},"get":function(path,qsp,isjson,ctjson){var d,cachedVersion,cache=CT.net._cache&&(isjson||ctjson);path=CT.net.qs(path,qsp);if(cache){cachedVersion=CT.storage.get(path);if(cachedVersion)
return cachedVersion;}
d=CT.net.xhr(path,"GET");if(ctjson)
d=CT.net._ctresponse(d,path).data;else{if(isjson)
d=JSON.parse(d);if(cache)
CT.storage.set(path,d);}
return d;}},"scriptImport":function(modpath,cb,delay){var h=document.getElementsByTagName("head")[0],fp=(modpath.slice(0,4)=="http")&&modpath||(CT.net.fullPath(modpath.replace(/\./g,"/")+".js")),fresh=!(fp in CT._.scriptImportCb);if(fresh)
CT._.scriptImportCb[fp]=[];if(cb)
CT._.scriptImportCb[fp].push(cb);if(fresh){h.appendChild(CT.dom.script(fp));h.appendChild(CT.dom.script(null,"CT._.onImport('"+fp+"');",delay));}},"require":function(modname,lazy){if(modname.slice(0,4)=="http"||modname.startsWith("/")){if(!(modname in CT._.extReqs)){CT._.extReqs[modname]=true;eval(CT.net.get(modname));}}else{var modpath=modname.split("."),curpath,curmod=window;while(curmod&&modpath.length){curpath=modpath.shift();if(curpath in curmod)
curmod=curmod[curpath];else{modpath.unshift(curpath);modpath.forEach(function(p,i){curmod=curmod[p]={};});modpath.length=0;curmod=null;}}
if(!curmod)
eval(CT.net.get(CT.net.fullPath(modname.replace(/\./g,"/")+".js")));}
return eval(modname);},"initCSS":function(){var scfg=core.config.css,sec,sload=function(c){c.forEach(function(css){CT.dom.addStyle(null,css);});},pn=location.pathname;if(Array.isArray(scfg))
return sload(scfg);for(sec in scfg){if(sec.startsWith("!")){if(!pn.startsWith(sec.slice(1)))
sload(scfg[sec])}else if(pn.startsWith(sec))
sload(scfg[sec])}},"initCore":function(){CT.initCSS();if(core.config.autoparse)
CT.dom.setAutoparse(core.config.autoparse);CT.layout.header(core.config.header);core.config.footer&&CT.layout.footer(core.config.footer);core.config.mobile.scale&&CT.dom.meta("viewport","width=device-width, initial-scale=1");core.config.borderbox&&CT.dom.addStyle("* {box-sizing: border-box;}");core.config.escapeModals&&CT.key.on("ESCAPE",CT.modal.close);},"setVal":function(k,v){CT._.vals[k]=v;},"getVal":function(k){return CT._.vals[k];},"clipboard":function(val,msg){var n=CT.dom.field(null,val,"transparent");document.body.appendChild(n);n.select();document.execCommand('copy');CT.dom.remove(n);alert(msg||"copied to clipboard");},"onload":function(cb,n){n=n||window;if(!n._ct_onload){n._ct_onload=[];n.addEventListener('load',function(){CT._.triggerOnload(n);});}
n._ct_onload.push(cb);},"on":function(evt,cb,node){(node||window).addEventListener(evt,cb);},"onresize":function(cb,n){CT.on("resize",cb,n);},"dmerge":function(){var i,k,v,o={};for(i=arguments.length-1;i>-1;i--){if(arguments[i]){for(k in arguments[i]){v=arguments[i][k];if(v&&typeof v=="object")
o[k]=Array.isArray(v)?v.slice():CT.dmerge(v);else
o[k]=v;}}}
return o;},"merge":function(){var i,k,o={};for(i=arguments.length-1;i>-1;i--)
if(arguments[i])
for(k in arguments[i])
o[k]=arguments[i][k];return o;},"bind":function(ctx,obj){for(var p in obj){if(typeof obj[p]=="function")
obj[p]=obj[p].bind(ctx);else if(obj[p]&&typeof obj[p]=="object")
CT.bind(ctx,obj[p]);}},"Class":function(obj,parent){obj.fullInit=function(){if(parent)
parent.prototype.fullInit.apply(this,arguments);if(obj.init)
obj.init.apply(this,arguments);};var c=function(){var instance=CT.dmerge(c.prototype);CT.bind(instance,instance);if(!instance.CLASSNAME){instance.CLASSNAME="CT Class";CT.log("Class missing CLASSNAME property -- falling back to 'CT Class'");}
if(!instance.log)
instance.log=CT.log.getLogger(instance.CLASSNAME);obj.fullInit.apply(instance,arguments);return instance;};c.prototype=CT.merge(obj,parent&&parent.prototype);return c;}};CT.info.android=/Android/.test(CT.info.userAgent);CT.info.iOs=/iPhone|iPad/.test(CT.info.userAgent);CT.info.mobile=/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(CT.info.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(CT.info.userAgent.substr(0,4));CT.info.iPhone=CT.info.userAgent.indexOf("iPhone")!=-1;CT.info.iPad=CT.info.userAgent.indexOf("iPad")!=-1;CT.info.androidTablet=CT.info.android&&!CT.info.mobile;CT.info.tablet=CT.info.iPad||CT.info.androidTablet;CT.info.isStockAndroid=(CT.info.userAgent.indexOf("Mozilla/5.0")!=-1)&&(CT.info.userAgent.indexOf("Android ")!=-1)&&(CT.info.userAgent.indexOf("AppleWebKit")!=-1)&&(CT.info.userAgent.indexOf("Chrome")==-1);CT.info.isMac=/Macintosh/.test(CT.info.userAgent);CT.info.isChrome=CT.info.userAgent.indexOf("Chrome")!=-1;CT.info.isFirefox=CT.info.userAgent.indexOf("Firefox")!=-1;CT.log=function(msg,level){if(CT.log._silent)
return;msg=CT.log._fix(msg);for(var i=0;i<CT.log.grep._ins.length;i++)
if(msg.indexOf(CT.log.grep._ins[i])==-1)
return;for(var i=0;i<CT.log.grep._outs.length;i++)
if(msg.indexOf(CT.log.grep._outs[i])!=-1)
return;var s=(new Date()).toLocaleTimeString().slice(0,-3);if(level)
for(var i=0;i<level;i++)
s+=" ";console.log(s,msg);};CT.log.grep=function(ins,outs){CT.log.grep._ins=ins||[];CT.log.grep._outs=outs||[];};CT.log.grep._ins=[];CT.log.grep._outs=[];CT.log._fix=function(a){return(typeof(a)=="object")?JSON.stringify(a):a;}
CT.log._silent=true;CT.log.set=function(bool){CT.log._silent=bool;};CT.log._loggerCounts={};CT.log.getLogger=function(component){var lc=CT.log._loggerCounts;if(!(component in lc))
lc[component]=0;var signature=component+" {"+lc[component]+"}";lc[component]+=1;var logger=function(){var str_arr=[];for(var i=0;i<logger.arguments.length;i++)
str_arr.push(CT.log._fix(logger.arguments[i]));CT.log("["+signature+"] "+str_arr.join(" "));};return logger;};CT.log._tcbs={};CT.log._timer=CT.log.getLogger("timer");CT.log.startTimer=function(tname,msg){CT.log._tcbs[tname]=Date.now();msg&&CT.log._timer("Initiated",tname,"with",msg);};CT.log.endTimer=function(tname,msg){var duration=(Date.now()-CT.log._tcbs[tname])/1000;CT.log._timer("Completed in",duration,"seconds:",tname,msg);};CT.event={cbs:{},unsubscribe:function(ename,cb){var cbs=CT.event.cbs;cbs[ename]&&CT.data.remove(cbs[ename],cb);},subscribe:function(ename,cb){var cbs=CT.event.cbs;if(!cbs[ename])
cbs[ename]=[];CT.data.append(cbs[ename],cb);},emit:function(ename,data){var cbs=CT.event.cbs;cbs[ename]&&cbs[ename].forEach(cb=>cb(data));}};if(!window.JSON)
CT.require("CT.lib.shims.JSON",true);if(!window.sessionStorage)
CT.require("CT.lib.shims.sessionStorage",true);if(!document.createElement("div").classList)
CT.require("CT.lib.shims.classList",true);if(!window.requestAnimationFrame)
CT.require("CT.lib.shims.requestAnimationFrame",true);if(!Object.values)
CT.require("CT.lib.shims.ObjectValues",true);if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)
CT.require("CT.lib.shims.getUserMedia",true);if(typeof MediaStream!=='undefined'&&!('stop'in MediaStream.prototype))
CT.require("CT.lib.shims.MediaStreamStop",true);if(!window.addEventListener)
window.addEventListener=window.attachEvent;;window.CT.dom=window.CT.dom||{};CT.dom={"_autoparse":false,"setAutoparse":function(bool){CT.dom._autoparse=bool;},"_nodes":{},"_obj2node":function(attrs){var args=[];if(attrs.builder){attrs.content=attrs.items.map(function(item){return attrs.builder(item);});delete attrs.builder;delete attrs.items;}
["content","type","classname","id"].forEach(function(a){args.push(attrs[a]);delete attrs[a];});args.push(attrs);if(attrs.style){args.push(attrs.style);delete attrs.style;}
return CT.dom.node.apply(null,args);},"node":function(content,type,classname,id,attrs,style){var d=document.createElement(type||"div");if(content!=null){if(Array.isArray(content))
content.forEach(function(item){d.appendChild(item instanceof Node?item:CT.dom.node(item));});else if(content instanceof Node)
d.appendChild(content);else if(typeof content=="function")
d.appendChild(content());else if(typeof content=="object")
return CT.dom._obj2node(content);else if((typeof content=="string"&&content.length)||typeof content=="number"){if(type=="table")
alert("illegal innerHTML set on table! content: "+content);else if(type=="style"){d.type='text/css';if(d.styleSheet){d.styleSheet.cssText=content;}else{d.appendChild(document.createTextNode(content));}}
else{if(CT.dom._autoparse)
content=CT.parse.process(content.toString());d.innerHTML=content;}}}
if(classname)
d.className=classname;if(id){d.id=id;CT.dom._nodes[id]=d;}
d.on=function(e,func){if(!func){for(var k in e)
d.addEventListener(k,e[k]);}
else if(e=="visible"){var io=new IntersectionObserver(function(entz){if(entz[0].intersectionRatio)
func();});io.observe(d);}else
d.addEventListener(e,func);};if(attrs){for(var attr in attrs){if(attrs[attr]==null)
continue;if(["value","onclick","srcObject"].indexOf(attr)!=-1)
d[attr]=attrs[attr];else if(attr.slice(0,2)=="on")
d.on(attr.slice(2),attrs[attr]);else
d.setAttribute(attr,attrs[attr]);}}
if(style)
for(var rule in style)
d.style[rule]=style[rule];return d;},"table":function(rows,classname,id,attrs,style){return CT.dom.node(rows.map(function(row){return CT.dom.node(row.map(function(cell){return CT.dom.node(cell,"td");}),"tr");}),"table",classname,id,attrs,style);},"div":function(content,classname,id,attrs,style){return CT.dom.node(content,"div",classname,id,attrs,style);},"flex":function(content,classname,id,attrs,style){return CT.dom.div(content,"flex "+classname,id,attrs,style);},"span":function(content,classname,id,attrs,style){return CT.dom.node(content,"span",classname,id,attrs,style);},"script":function(src,content,delay,onload){if(delay)
content="setTimeout(function() { "+content+" }, "+delay+");";return CT.dom.node(content,"script",null,null,{"src":src,"onload":onload});},"link":function(content,onclick,href,classname,id,attrs,newtab){if(attrs==null)
attrs={};if(onclick)
attrs.onclick=onclick;if(href)
attrs.href=href;if(newtab)
attrs.target="_blank";return CT.dom.node(content,"a",classname,id,attrs);},"button":function(content,onclick,classname,id,disabled){return CT.dom.node(content,"button",classname,id,{"onclick":onclick,"disabled":disabled});},"field":function(id,value,classname,type,attrs,style,placeholder){attrs=attrs||{};if(value||(typeof value=="number"))
attrs.value=value;if(type)
attrs.type=type;if(placeholder)
attrs.placeholder=placeholder;return CT.dom.node("","input",classname,id,attrs,style);},"file":function(cb,id,classname,multiple){return CT.dom.field(id,null,classname,"file",{onchange:cb,multiple:multiple});},"fieldList":function(vals,maker,style,onadd,onremove,onchange,bottomadd){if(arguments.length==1&&vals&&!Array.isArray(vals)){var obj=vals;vals=obj.vals;maker=obj.maker;style=obj.style;onadd=obj.onadd;onremove=obj.onremove;onchange=obj.onchange;bottomadd=obj.bottomadd;}
var input=function(v,i){return maker?maker(v,i):CT.dom.field(null,v);},row=function(v,i){var butt=CT.dom.button("remove",function(){CT.dom.remove(butt.parentNode);onremove&&onremove(v);onchange&&onchange(n.value());});return CT.dom.node([butt,input(v,i)]);},n=CT.dom.node(vals&&vals.map(row),null,null,null,null,style);n.empty=input();n.addButton=CT.dom.button("add",function(){if(n.empty.value){var newRow=row(n.empty.value);bottomadd?n.appendChild(newRow):n.insertBefore(newRow,n.firstChild);onadd&&onadd(newRow.lastElementChild);onchange&&onchange(n.value());if(n.empty.fill)
n.empty.fill()
else
n.empty.value="";}});n.addButton.style.width="57px";n.value=function(){return CT.dom.map(n,function(wrapper){return wrapper.lastChild.value;});};return n;},"textArea":function(id,value,classname){return CT.dom.node("","textarea",classname,id,value&&{"value":value}||null);},"img":function(src,imgclass,onclick,href,target,title,linkid,wrapperclass,imgid,noanchor,style){if(arguments.length==1&&typeof arguments[0]!="string"){var obj=arguments[0];src=obj.src;imgclass=obj.imgclass||obj.className;onclick=obj.onclick;href=obj.href;target=obj.target;title=obj.title;linkid=obj.linkid;wrapperclass=obj.wrapperclass;imgid=obj.imgid;noanchor=obj.noanchor;style=obj.style;}
var n=CT.dom.node("","img",imgclass,imgid,{"src":src},style);if(noanchor)
n.onclick=onclick;else if(onclick||href){var l=CT.dom.link("",onclick,href);if(target)
l.target=target;if(title)
l.title=l.alt=title;if(linkid)
l.id=linkid;if(wrapperclass)
n=CT.dom.div(n,wrapperclass);l.appendChild(n);return l;}
return n;},"panImg":function(opts){opts=CT.merge(opts,{pan:true,panDuration:5000,className:"abs all0 noflow below"});var img=CT.dom.div(CT.dom.img(opts.img,"abs"),opts.className);if(opts.pan){img.controller=CT.trans.pan(img.firstChild,{duration:opts.panDuration},true);if(opts.controllerHook){opts.controllerHook.hide=img.controller.pause;opts.controllerHook.show=img.controller.resume;}}
return img;},"select":function(onames,ovalues,id,curvalue,defaultvalue,onchange,other,noto){if(arguments.length==1&&!Array.isArray(onames)){var obj=onames;onames=obj.names;ovalues=obj.values;id=obj.id;curvalue=obj.curvalue;defaultvalue=obj.defaultvalue;onchange=obj.onchange;other=obj.other;noto=noto in obj?obj.noto:true;}
ovalues=ovalues||onames;var s=CT.dom.node("","select","",id);if(other){defaultvalue=defaultvalue||"other";if(ovalues.indexOf("other")==-1){ovalues.push("other");if(ovalues!=onames)
onames.push("other");}
s.other=CT.dom.field(null,(ovalues.indexOf(curvalue)==-1)&&curvalue,"hidden");s.container=CT.dom.node([s,s.other]);s.container.value=function(){if(s.value=="other")
return s.other.value.trim();return s.value;};}
for(var i=0;i<onames.length;i++){s.appendChild(CT.dom.node(onames[i],"option","","",{"value":ovalues[i]}));}
if(curvalue)
s.value=ovalues.indexOf(curvalue)!=-1&&curvalue||defaultvalue;s.onchange=function(){if(other){if(s.value=="other")
s.other.style.display="block";else
s.other.style.display="none";}
onchange&&onchange(s.value);};noto||setTimeout(s.onchange);return s.container||s;},"range":function(oninput,min,max,value,step,classname,id,onchange){var r=CT.dom.node("","input",classname,id,{"type":"range","oninput":oninput&&function(){oninput(r.value);},"onchange":onchange&&function(){onchange(r.value);},"min":min,"max":max,"value":value,"step":step});return r;},"checkbox":function(id,ischecked,style){var cbdata={"type":"checkbox"};if(ischecked)
cbdata.checked=ischecked;return CT.dom.node("","input","",id,cbdata,style);},"wrapped":function(nodes,type,className,id,attrs){CT.log("[DEPRECATION WARNING] CT.dom.wrapped() is deprecated. Use CT.dom.node().");var wrapper=CT.dom.node("",type,className,id,attrs);if(!Array.isArray(nodes))
nodes=[nodes];for(var i=0;i<nodes.length;i++)
wrapper.appendChild(nodes[i]);return wrapper;},"audio":function(src,controls,autoplay,preload,onplay,onended,className,id,attrs,oncanplay,onpause){if(arguments.length==1&&typeof arguments[0]!="string"){var obj=arguments[0];src=obj.src;controls=obj.controls;autoplay=obj.autoplay;preload=obj.preload;onplay=obj.onplay;onended=obj.onended;className=obj.className;id=obj.id;attrs=obj.attrs;oncanplay=obj.oncanplay;onpause=obj.onpause;}
attrs=attrs||{};attrs.src=src;if(controls)
attrs.controls="true";if(autoplay)
attrs.autoplay="true";if(onplay)
attrs.onplay=onplay;if(onpause)
attrs.onpause=onpause;if(onended)
attrs.onended=onended;if(oncanplay)
attrs.oncanplay=oncanplay;attrs.preload=attrs.preload||preload||"none";return CT.dom.node("","audio",className,id,attrs);},"video":function(src,className,id,attrs,style,oncanplay,onended,onplay,onpause,poster,controls,autoplay){if(arguments.length==1&&typeof arguments[0]!="string"){var obj=arguments[0];src=obj.src;className=obj.className;id=obj.id;attrs=obj.attrs;style=obj.style;oncanplay=obj.oncanplay;onended=obj.onended;onplay=obj.onplay;onpause=obj.onpause;poster=obj.poster;controls=obj.controls;autoplay=obj.autoplay;}
attrs=attrs||{};var multisrc=false;if(Array.isArray(src))
multisrc=true;else if(typeof src=="object")
attrs.srcObject=src;else
attrs.src=src;if(controls)
attrs.controls="true";if(autoplay)
attrs.autoplay="true";if(onplay)
attrs.onplay=onplay;if(onpause)
attrs.onpause=onpause;if(onended)
attrs.onended=onended;if(oncanplay)
attrs.oncanplay=oncanplay;if(poster)
attrs.poster=poster;var n=CT.dom.node(multisrc&&src.map(function(s){return CT.dom.node(null,"source",null,null,{src:s});}),"video",className,id,attrs,style);n.stream=function(stream){n.srcObject=stream;n.play();};return n;},"iframe":function(src,className,id,attrs,style){if(arguments.length==1&&typeof arguments[0]!="string"){var obj=arguments[0];src=obj.src;className=obj.className;id=obj.id;attrs=obj.attrs;style=obj.style;}
var iframe=CT.dom.node("","iframe",className,id,CT.merge({"src":src},attrs),style);iframe.setHash=function(txt){CT.dom.getLoc(iframe).hash=txt;};return iframe;},"pad":function(psize){psize=psize||1;var ptxt="";for(var i=0;i<psize;i++)
ptxt+="&ensp;";return CT.dom.node(ptxt,"span");},"br":function(bsize){bsize=bsize||1;var bs=[];for(var i=0;i<bsize;i++)
bs.push(CT.dom.node(null,"br"));return CT.dom.node(bs);},"marquee":function(content,className,direction,noresize){var n=CT.dom.node(content,"marquee",className,null,{direction:direction||"left",behavior:"alternate"});!noresize&&setTimeout(function(){CT.dom.each(n,function(sub){sub.style.height=n.clientHeight+"px";});});return n;},"label":function(content,htmlFor,className,click){var n=CT.dom.node(content,"label",className,null,{"for":htmlFor,"htmlFor":htmlFor});if(click){n.onclick=function(){var tnode=CT.dom.id(htmlFor);tnode&&tnode.onclick&&tnode.onclick();};}
return n;},"getDoc":function(iframe){return iframe.documentWindow||iframe.contentWindow||iframe.contentDocument;},"getLoc":function(iframe){return CT.dom.getDoc(iframe).location;},"checkboxAndLabel":function(cbid,ischecked,lname,lclass,cclass,onclick){if(!lname&&cbid.indexOf(" ")!=-1){lname=cbid;cbid=cbid.replace(/ /g,"");}
var n=CT.dom.node("","div",cclass);var cbname=cbid+"checkbox";var cb=CT.dom.checkbox(cbname,ischecked);n.appendChild(cb);if(onclick){cb.onclick=function(){onclick(cb);};}
n.appendChild(CT.dom.label(lname||cbid,cbname,lclass));n.isChecked=function(){return cb.checked;};return n;},"resizeTextArea":function(cbody){if(navigator.appName.indexOf("Microsoft Internet Explorer")==0)
cbody.style.overflow='visible';else{while(cbody.rows>1&&cbody.scrollHeight<cbody.offsetHeight)
cbody.rows--;while(cbody.scrollHeight>cbody.offsetHeight)
cbody.rows++;}},"labelAndField":function(lname,fid,fclass,lclass,fval,ista,isresize){fid=fid||lname.replace(/ /g,"");var n=CT.dom.node();var finput=CT.dom[(ista&&"textArea"||"field")](fid,fval,"right "+(fclass||""),(lname.indexOf("Password")!=-1)&&"password"||null);if(ista&&isresize){finput.onkeyup=function(){CT.dom.resizeTextArea(finput);return true;};}
n.appendChild(finput);n.appendChild(CT.dom.node(lname,"label",lclass,null,{"for":fid,"htmlFor":fid}));n.appendChild(CT.dom.node("","div","clearnode"));return n;},"_radioStripStep":function(radios,labels,lname,cb,stripname,stripnum,ison){var fname=(stripname||"radiostrip")+(stripnum||"")+lname;var f=CT.dom.field(fname,null,null,"radio");f.name=(stripname||"")+(stripnum||"");f.onclick=function(){cb(lname);};if(ison)
f.checked=true;radios.insertCell(-1).appendChild(f);labels.insertCell(-1).appendChild(CT.dom.node(lname,"label",null,null,{"htmlFor":fname,"for":fname}));},"radioStrip":function(pnode,lnames,cb,stripname,stripnum,stripval){var rtable=CT.dom.node("","table");rtable.style.textAlign="center";var radios=rtable.insertRow(0);var labels=rtable.insertRow(1);for(var i=0;i<lnames.length;i++)
CT.dom._radioStripStep(radios,labels,lnames[i],cb,stripname,stripnum,lnames[i]==stripval);pnode.appendChild(rtable);},"options":function(data,cb,selected){var fid,dname,n=CT.dom.div(data.map(function(d,i){dname=d.name||d,fid="rs"+i+dname,fopts={onclick:function(){cb(d);}};if(selected&&((selected==d)||(selected==d.key)))
fopts.checked=true;return[CT.dom.field(fid,null,null,"radio",fopts),CT.dom.label(dname,fid)];}));return n;},"linkWithIcon":function(icon,lname,laddr,lonclick){var n=CT.dom.node("","span");n.appendChild(CT.dom.img(icon,"vmiddle rpaddedsmall nodecoration",lonclick,laddr));n.appendChild(CT.dom.link(lname,lonclick,laddr));return n;},"labeledImage":function(img,href,label,_alt,_icl,_wcl,_lcl,reverseNodes,onclick){var nlink=CT.dom.link();var imageNode=CT.dom.img(img,_icl);var labelNode=CT.dom.node(label,"div",_lcl);if(reverseNodes){nlink.appendChild(labelNode);nlink.appendChild(imageNode);}else{nlink.appendChild(imageNode);nlink.appendChild(labelNode);}
nlink.title=nlink.alt=_alt||label;var w=CT.dom.node(nlink,"div",_wcl);if(href){nlink.href=href;nlink.target="_blank";}else if(onclick)
w.onclick=onclick;return w;},"buildForm":function(section,fields){var table=document.getElementById(section+"Table");for(var i=0;i<fields.length;i++){var field=fields[i];var id=section+field.replace(/ /g,"");var row=table.insertRow(-1);row.insertCell(0).appendChild(CT.dom.node(field,"label","","",{"htmlFor":id,"for":id}));var inputTag=CT.dom.field(id);if(field.indexOf("Password")!=-1)
inputTag.type="password";row.insertCell(1).appendChild(inputTag);}
return table;},"timer":function(start,cb,classname,id,attrs){var n=CT.dom.node(start,"div",classname,id,attrs);n._sec=start;n._check=function(){n._sec-=1;n.innerHTML=n._sec;if(n._sec==0){n.stop();cb&&cb();}};n.set=function(val){n.innerHTML=n._sec=val;};n.start=function(){n.stop();n._interval=setInterval(n._check,1000);};n.stop=function(){if(n._interval){clearInterval(n._interval);n._interval=null;}};n.start();return n;},"choices":function(nodes,multi,cellClass,selectedClass,onchange){selectedClass=selectedClass||"grayback";var n=CT.dom.node();n._sel=null;n.value=multi?[]:-1;nodes.forEach(function(node,i){node.onclick=function(){if(!multi&&n._sel)
n._sel.classList.remove(selectedClass);n._sel=node;if(node.classList.contains(selectedClass)){node.classList.remove(selectedClass);if(multi)
CT.data.remove(n.value,i);else
n.value=[];}else{node.classList.add(selectedClass);if(multi)
CT.data.append(n.value,i);else
n.value=i;}
onchange&&onchange(i);};node.classList.add(cellClass||"choice_cell");n.appendChild(node);});return n;},"updown":function(){var up=CT.dom.link("up",function(){var pnode=n.parentNode,psib=pnode.previousSibling;pnode.parentNode.insertBefore(pnode,psib);n.update();psib.firstChild.update();},null,"block"),down=CT.dom.link("down",function(){var pnode=n.parentNode,nsib=pnode.nextSibling,nnsib=nsib.nextSibling;if(nnsib)
pnode.parentNode.insertBefore(pnode,nnsib);else
pnode.parentNode.appendChild(pnode);nsib.firstChild.update();n.update();},null,"block"),n=CT.dom.div([up,down],"right small");n.update=function(){CT.dom[n.parentNode.previousSibling?"show":"hide"](up);CT.dom[n.parentNode.nextSibling?"show":"hide"](down);};setTimeout(n.update);return n;},"shuffler":function(data,rower){rower=rower||function(d){return d.label||d.name||d.title||d;};var n=CT.dom.div();data.forEach(function(d,i){var row=CT.dom.div([CT.dom.updown(),rower(d)],"choice_cell");row.data=d;n.appendChild(row);});n.value=function(){return CT.dom.map(n,r=>r.data);};return n;},"dragListing":function(d,rower){var nid="dli_"+(d.key||d.name||d),n=rower?rower(d):CT.dom.div(d.name||d,"bordered padded margined round");n.id=nid;n.draggable=true;n.ondragstart=function(ev){ev.dataTransfer.setData("text/plain",nid);};return n;},"dragList":function(data,rower,onchange){var pnode=CT.dom.div(data.map(d=>CT.dom.dragListing(d,rower)),"bordered",null,{ondrop:function(ev){var nodeId=ev.dataTransfer.getData("text/plain"),tar=ev.target;while(pnode.contains(tar)&&tar.parentNode!=pnode)
tar=tar.parentNode;pnode.insertBefore(CT.dom.id(nodeId),tar);pnode.data=CT.dom.map(pnode,d=>d.id.slice(4));ev.preventDefault();onchange&&onchange(pnode.data);},ondragover:function(ev){ev.dataTransfer.dropEffect="move";ev.preventDefault();}});pnode.data=data.map(d=>d.key||d);return pnode;},"form":function(content,action,method,classname,id){return CT.dom.node(content,"form",classname,id,{method:method||"post",action:action});},"spinner":function(){return CT.dom.node(CT.dom.node([CT.dom.node("loading...","strong"),CT.dom.node("","span")],"div","ctspinner"),"div","ctswrap");},"_monthnames":["January","February","March","April","May","June","July","August","September","October","November","December"],"currentyear":Math.max((new Date()).getFullYear(),2014),"timeSelector":function(etimes,curvalue,onchange){etimes=etimes||[];for(var i=0;i<24;i++){var istr=i<10?"0"+i:i;etimes.push(istr+":"+"00");etimes.push(istr+":"+"30");}
return CT.dom.select(etimes,null,null,curvalue,null,onchange,null,true);},"dateSelectors":function(node,d,startdate,enddate,withtime,noday,val){if(arguments.length==1&&!(arguments[0]instanceof Node)){var obj=arguments[0];node=obj.node;d=obj.d;startdate=obj.startdate;enddate=obj.enddate;withtime=obj.withtime;noday=obj.noday;val=obj.val;}
var eyears=["Year"];startdate=startdate||CT.dom.currentyear;enddate=enddate||CT.dom.currentyear;for(var i=startdate;i<=enddate;i++)
eyears.push(i);node=node||CT.dom.node(null,"span");d=d||node;d.year=CT.dom.select(eyears);d.month=CT.dom.select(["Month"].concat(CT.dom._monthnames),["Month","01","02","03","04","05","06","07","08","09","10","11","12"]);node.appendChild(d.year);node.appendChild(d.month);if(!noday){d.day=CT.dom.select(["Day","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]);node.appendChild(d.day);}
if(withtime){d.time=CT.dom.timeSelector(["Time"]);node.appendChild(d.time);}
if(val){var vsplit=val.split(" "),dsplit=vsplit[0].split("-");d.year.value=dsplit[0];d.month.value=dsplit[1];if(!noday)
d.day.value=dsplit[2];if(withtime){var t=vsplit[1].slice(0,-3);d.time.value=t;if(t&&d.time.value!=t){d.time.insertBefore(CT.dom.node(t,"option"),d.time.firstChild.nextSibling);d.time.value=t;}}}
d.value=function(){if(d.year.value=="Year"||d.month.value=="Month"||(!noday&&d.day.value=="Day"))
return null;var val=d.year.value+"-"+d.month.value;if(!noday)
val+="-"+d.day.value;if(withtime)
val+=" "+(d.time.value||"00:00")+":00";else
val+=" 00:00:00";return val;};return node;},"_pwpcb":null,"passwordPrompt":function(cb){CT.log("[DEPRECATION WARNING] CT.dom.passwordPrompt() is deprecated. Use CT.Prompt instead.");CT.dom._pwpcb=cb;var pwprompt=document.getElementById("passwordprompt");var pwpfield=document.getElementById("pwpfield");if(pwprompt==null){pwprompt=CT.dom.node("","div","hidden basicpopup centered","passwordprompt");document.body.appendChild(pwprompt);pwprompt.appendChild(CT.dom.node("For your own security, please enter your password.","div","bottompadded"));pwpfield=CT.dom.field("pwpfield",null,null,"password");pwprompt.appendChild(pwpfield);var entercb=function(){if(!CT.parse.validPassword(pwpfield.value))
return alert("invalid password!");pwprompt.style.display="none";CT.dom._pwpcb(pwpfield.value);};CT.dom.inputEnterCallback(pwpfield,entercb);pwprompt.appendChild(CT.dom.button("Continue",entercb));pwprompt.appendChild(CT.dom.button("Cancel",function(){pwprompt.style.display="none";}));}
pwpfield.value="";pwprompt.style.display="block";pwpfield.focus();CT.align.centered(pwprompt);},"_blurs":{},"setBlur":function(fieldId,values){CT.dom._blurs[fieldId]=values;},"getFieldValue":function(fieldId,fieldPath,rules){var field=CT.dom.id(fieldId)||fieldId;if(!field)
return null;if(fieldPath){for(var i=0;i<fieldPath.length;i++)
field=field[fieldPath[i]];}
var s=field.container?field.container.value():field.value,blurs=CT.dom._blurs[fieldId]||field._blurs;if(!s||(blurs&&blurs.indexOf(s)!=-1))
return"";if(rules){if(rules.requires){for(var i=0;i<rules.requires.length;i++){if(s.indexOf(rules.requires[i])==-1){s="";break;}}}
if((s&&s.length||0)<(rules.length||0))
s="";}
return s;},"blurField":function(field,useblurs){useblurs=CT.dom._blurs[field.id]=field._blurs=useblurs||CT.dom._blurs[field.id]||field._blurs;var pw=field.type=="password";if(useblurs){field.onblur=function(){if(field.value==""){if(pw)
field.type="";field.classList.add("gray");field.value=useblurs[Math.floor(Math.random()*useblurs.length)];}
else
field.classList.remove("gray");};field.onfocus=function(){if(useblurs.indexOf(field.value)!=-1){field.value="";if(pw)
field.type="password";field.classList.remove("gray");}};field.onblur();}},"setFieldValue":function(value,fieldId,fieldPath){var field=document.getElementById(fieldId);if(!field)
return setTimeout(CT.dom.setFieldValue,500,value,fieldId,fieldPath);if(fieldPath){for(var i=0;i<fieldPath.length;i++)
field=field[fieldPath[i]];}
field.value=value||"";CT.dom.blurField(field);},"genfield":function(ftype,n,d,u,val,node2){var f=CT.dom.field("up"+ftype,val||u[ftype],"right w280",(ftype.indexOf("password")!=-1)&&"password"||null);d[ftype]=f;n.appendChild(f);n.appendChild(CT.dom.node(CT.parse.key2title(ftype),"label","bold",null,{"for":"up"+ftype,"htmlFor":"up"+ftype}));if(node2){n.appendChild(CT.dom.node("&nbsp;&nbsp;","span"));n.appendChild(node2);}
n.appendChild(CT.dom.node("","div","clearnode"));},"inputEnterCallback":function(n,cb,fid,noBreak,keyup){n.onenter=function(e){if(noBreak)
n.value=n.value.replace("\n","").replace("\r","");if(fid)
document.getElementById(fid).focus();if(cb&&(cb(n.value,e)=="clear"))
n.value="";};n.addEventListener("keyup",function(e){e=e||window.event;var code=e.keyCode||e.which;keyup&&keyup(n.value);if(code==13||code==3)
n.onenter(e);});return n;},"smartField":function(cb,classname,id,value,type,blurs,isTA,noBreak,wyz,keyup){if(arguments.length==1&&typeof arguments[0]!="function"){var obj=arguments[0];cb=obj.cb;classname=obj.classname;id=obj.id;value=obj.value;type=obj.type;blurs=obj.blurs;isTA=obj.isTA;noBreak=obj.noBreak;wyz=obj.wyz;keyup=obj.keyup;}
var nonbsp,restricted,tables,spellcheck,fullscreen;if(wyz&&wyz.includes){nonbsp=wyz.includes("nonbsp");restricted=wyz.includes("restricted");tables=wyz.includes("tables");spellcheck=wyz.includes("spellcheck");fullscreen=wyz.includes("fullscreen");}
id=id||("sf"+Math.floor((Math.random()*100000)));var f=CT.dom.inputEnterCallback(CT.dom[isTA?"textArea":"field"](id,value,classname,type),cb,id,noBreak,keyup);f.fieldValue=function(){return wyz?f.get(nonbsp):CT.dom.getFieldValue(f);};wyz&&CT.rte.qwiz(id,value,!restricted,tables,spellcheck,fullscreen);if(blurs)
CT.dom.blurField(f,blurs);return f;},"numberSelector":function(o){var initial=o.initial||1,shower=CT.dom.div(initial),r=CT.dom.range(function(val){CT.dom.setContent(shower,val);},o.min||0.25,o.max||5,initial,o.step||0.25,o.classname,o.id,o.onchange),n=CT.dom.div([shower,r]);n.value=function(){return window["parse"+((o.step==1)?"Int":"Float")](r.value);};return n;},"iconSelector":function(items,selectFirst){var cur,n=CT.dom.div(items.map(function(i){var img=CT.dom.img(i.img||i.url||i.item||i,"padded margined round",function(){if(cur)
cur.firstChild.classList.remove("bordered");cur=img;cur.firstChild.classList.add("bordered");});img._icon=i;return img;}));n.value=function(){return cur&&cur._icon;};selectFirst&&n.firstChild.onclick();return n;},"soundSelector":function(items,selectFirst){var cur,n=CT.dom.div(items.map(function(aud){var src=aud.src||aud.item,wrap=CT.dom.div([aud.label||aud.name,CT.dom.audio({src:src,controls:true,className:"w1"})],"pointer padded margined round",null,{onclick:function(){if(cur)
cur.classList.remove("bordered");cur=wrap;cur.classList.add("bordered");}});wrap._data=aud;return wrap;}));n.value=function(){return cur&&cur._data;};selectFirst&&n.firstChild.onclick();return n;},"_isVerticalOrientation":function(node){if(node.clientHeight==0||node.clientWidth==0)
return undefined;return node.clientWidth/node.parentNode.clientWidth<node.clientHeight/node.parentNode.clientHeight;},"cover":function(node){var v=CT.dom._isVerticalOrientation(node);if(v==undefined)
return v;node.classList.add(v?"w1":"h1");node.classList.remove(v?"h1":"w1");return v;},"contain":function(node){var v=CT.dom._isVerticalOrientation(node);if(v==undefined)
return v;node.classList.add(v?"h1":"w1");node.classList.remove(v?"w1":"h1");return v;},"fit":function(node){node.fit=function(){if(node.scrollHeight!=node.clientHeight){var size=parseInt(getComputedStyle(node).fontSize);node.style.fontSize=(size-1)+"px";setTimeout(node.fit);}};CT.onresize(node.fit);},"_ricounter":0,"_get_ta_id":function(){var taid="richinput"+CT.dom._ricounter;CT.dom._ricounter+=1;return taid;},"richInput":function(inputnode,taid,submitbutton,content,charlimit,blurs,noclear,taclass){taid=taid||CT.dom._get_ta_id();charlimit=charlimit||500;var cbody=CT.dom.textArea(taid,content,taclass||"fullwidth");CT.dom.blurField(cbody,blurs);inputnode.appendChild(CT.dom.node(cbody));var charcount=CT.dom.node("("+charlimit
+" chars left)","div","right",taid+"cc");cbody.onkeyup=function(e){e=e||window.event;var c=CT.dom.getFieldValue(taid).length;if(c>charlimit){cbody.value=cbody.value.slice(0,charlimit);charcount.className="right bold";if(e.preventDefault)
e.preventDefault();return false;}
else
charcount.className="right";charcount.innerHTML="("+(charlimit-c)+" chars left)";CT.dom.resizeTextArea(cbody);return true;};inputnode.appendChild(charcount);if(submitbutton)
inputnode.appendChild(submitbutton);else if(!noclear)
inputnode.appendChild(CT.dom.node("","div","clearnode"));return cbody;},"showHideT":function(n){n=n||document.body;n.style.opacity=n.style.opacity=="1"&&"0"||"1";},"showHideV":function(n,juston,justoff){n=n||document.body;if(juston)
n.style.visibility="visible";else if(justoff)
n.style.visibility="hidden";else
n.style.visibility=n.style.visibility=="visible"&&"hidden"||"visible";},"showHide":function(n,juston,justoff,dstyle){n=n||document.body;if(typeof n=="string")
n=CT.dom.id(n);dstyle=dstyle||"block";if(juston||justoff)
n.style.display=juston&&dstyle||"none";else if(n.style.display==""&&n.className.indexOf("hidden")==-1)
n.style.display="none";else
n.style.display=(n.style.display==dstyle)&&"none"||dstyle;},"showHideSet":function(nodes,juston,justoff,dstyle){for(var i=0;i<nodes.length;i++)
CT.dom.showHide(nodes[i],juston,justoff,dstyle);},"show":function(n,dstyle){CT.dom.showHide(n,true,false,dstyle);},"hide":function(n){CT.dom.showHide(n,false,true);},"showV":function(n){CT.dom.showHideV(n,true);},"hideV":function(n){CT.dom.showHideV(n,false,true);},"remove":function(n){if(!n)return;if(typeof n=="string")n=CT.dom.id(n);n&&n.parentNode&&n.parentNode.removeChild(n);},"replace":function(target,replacement){if(typeof target=="string")
target=CT.dom.id(target);if(typeof replacement=="string")
replacement=CT.dom.div(replacement);if(target.parentNode){target.parentNode.insertBefore(replacement,target);target.parentNode.removeChild(target);}},"clear":function(n){if(typeof n=="string")
n=CT.dom.id(n);(n||document.body).innerHTML="";},"addContent":function(targetNode,content,withClass){if(typeof content=="function")
content=content();if(Array.isArray(content))
content=CT.dom.div(content,withClass);if(typeof targetNode=="string")
targetNode=CT.dom.id(targetNode,true);if(typeof content=="string"||typeof content=="number")
targetNode.innerHTML+=content;else if(content)
targetNode.appendChild(content);},"setContent":function(targetNode,content,withClass){CT.dom.clear(targetNode);CT.dom.addContent(targetNode,content,withClass);},"setBody":function(content){CT.dom.setContent(document.body,content);},"addEach":function(parent,subs){subs.forEach(function(node){parent.appendChild(node);});},"ALLNODE":null,"loadAllNode":function(fallBackToBody){if(!CT.dom.ALLNODE){CT.dom.ALLNODE=document.getElementById("all")||(fallBackToBody&&document.body);CT.dom.ALLNODE._mobile=CT.align.width()<=720;window.onresize=function(){CT.dom.ALLNODE.resize&&CT.dom.ALLNODE.resize();CT.align.resize();};}},"getAllNode":function(fallBackToBody){CT.dom.loadAllNode(fallBackToBody);return CT.dom.ALLNODE;},"showAllNode":function(){var _a=CT.dom.ALLNODE;_a.style.opacity=_a.style["-moz-opacity"]=_a.style["-khtml-opacity"]="1";_a.style.filter="alpha(opacity = 100)";_a.style["-ms-filter"]="progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";},"addStyle":function(text,href,obj){if(obj){text=[];for(var key in obj){text.push(key+" {");var pobj=obj[key];for(var prop in pobj)
text.push(prop+": "+pobj[prop]+";");text.push("}");}
text=text.join("\n");}
var node=href?CT.dom.node(null,"link",null,null,{"href":href,"rel":"stylesheet"}):CT.dom.node(text,"style");CT.dom.head(node);},"doWhenNodeExists":function(id,cb){var n=CT.dom.id(id);if(n)
return cb(n);setTimeout(CT.dom.doWhenNodeExists,500,id,cb);},"id":function(id,all){return document.getElementById(id)||all&&CT.dom._nodes[id];},"_narr2arr":function(nodeArray){var arr=[];for(var i=0;i<nodeArray.length;i++)
arr.push(nodeArray[i]);return arr;},"className":function(cname,n){return CT.dom._narr2arr((n||document).getElementsByClassName(cname));},"tag":function(tag,n){return CT.dom._narr2arr((n||document).getElementsByTagName(tag));},"attr":function(key,val,first){var r=CT.dom.Q("["+(val?(key+'="'+val+'"'):key)+"]");return first?r[0]:r;},"Q":function(q,n){return CT.dom._narr2arr((n||document.body).querySelectorAll(q));},"head":function(node){var head=CT.dom.tag("head")[0];if(node)
head.appendChild(node);return head;},"meta":function(name,content){var meta=CT.dom.node(null,"meta");meta.name=name;meta.content=content;CT.dom.head(meta);},"each":function(p,f){for(var i=0;i<p.childNodes.length;i++)
f(p.childNodes[i],i);},"map":function(p,f){var vals=[],i;f=f||function(i){return i;};for(i=0;i<p.childNodes.length;i++)
vals.push(f(p.childNodes[i]));return vals;},"childNum":function(n){return CT.dom.map(n.parentNode).indexOf(n);},"mod":function(opts){var targets=opts.targets?opts.targets:(opts.target?[opts.target]:(opts.className?CT.dom.className(opts.className):(opts.id?[CT.dom.id(opts.id)]:[]))),property=opts.property||"display",value=opts.value||(opts.show?"block":opts.hide?"none":""),modz=opts.modz;if(!modz){modz={};modz[property]=value;}
Object.keys(modz).forEach(function(property){for(var i=0;i<targets.length;i++)
targets[i].style[property]=modz[property];});}};;window.CT.data=window.CT.data||{};CT.data={map:{},"sameList":function(list1,list2){if(list1.length!=list2.length)
return false;for(var i=0;i<list1.length;i++){if(list1[i]!=list2[i])
return false;}
return true;},"copyList":function(oldlist){var newlist=[];for(var i=0;i<oldlist.length;i++)
newlist.push(oldlist[i]);return newlist;},"diff":function(dold,dnew,required,compdicts,submap,complists){var ddiff=required||{};compdicts=compdicts||[];complists=complists||[];submap=submap||{};for(var k in dnew){if(compdicts.indexOf(k)!=-1){for(var j in dnew[k]){if(dnew[k][j]!=dold[k][j]){ddiff[k]=dnew[k];break;}}}
else if(complists.indexOf(k)!=-1){if(!CT.data.sameList(dnew[k],dold[k]))
ddiff[k]=dnew[k];}
else if(k in submap){if(dnew[k]!=dold[k][submap[k]])
ddiff[k]=dnew[k];}
else if(dnew[k]!=dold[k])
ddiff[k]=dnew[k];}
return ddiff;},"append":function(arr,el){if(arr.indexOf(el)==-1)
arr.push(el);},"remove":function(arr,el){var elindex=arr.indexOf(el);if(elindex!=-1)
return arr.splice(elindex,1);},"sum":function(arr){return arr.length?arr.reduce(function(a,b){if(Array.isArray(a)){return a.map(function(v,i){return v+b[i];});}
return a+b;}):arr;},"alpha":function(arr,prop){return arr.sort(function(a,b){if(prop){a=a[prop];b=b[prop];}
return(a<b)?-1:(a>b)?1:0;});},"has":function(key){return!!CT.data.map[key];},"get":function(key){return CT.data.map[key];},"add":function(d){if(CT.data.map[d.key]){for(var k in d)
CT.data.map[d.key][k]=d[k];}
else
CT.data.map[d.key]=d;},"addSet":function(dlist){for(var i=0;i<dlist.length;i++)
CT.data.add(dlist[i]);},"getSet":function(klist){return klist.map(CT.data.get);},"uniquify":function(items,exceptions){exceptions=exceptions||[];items=CT.data.copyList(items);items.sort();var newitems=[];var latestitem="";for(var i=0;i<items.length;i++){if(items[i]!=latestitem&&exceptions.indexOf(items[i])==-1){latestitem=items[i];newitems.push(latestitem);}}
return newitems;},"copy":function(str){var f=CT.dom.field(null,str,"transparent");document.body.appendChild(f);f.select();if(document.execCommand('copy')){alert("Link saved to clipboard. Great!");f.remove();}else{f.className="";CT.modal.modal(CT.dom.div(["Ctr-C to Copy URL",f],"centered"));setTimeout(function(){f.select();});}},"numstr":function(len){var s="",chunk;while(len){chunk=Math.min(len,16);s+=""+CT.data.random(Math.pow(10,chunk));len-=chunk;}
return s;},"random":function(max){return Math.floor(Math.random()*max);},"choice":function(arr){return arr[CT.data.random(arr.length)];},"checkAndDo":function(keys,cb,nlcb,eb,req,getpath,getparams){var needed=[];keys=CT.data.uniquify(keys);for(var i=0;i<keys.length;i++){if(CT.data.map[keys[i]]==null||req&&CT.data.map[keys[i]][req]==null)
needed.push(keys[i]);}
if(needed.length==0)
return cb();getparams=getparams||{"gtype":"data"};getparams.keys=needed;CT.net.post(getpath||"/get",getparams,"error retrieving data",function(rawdata){CT.data.addSet(rawdata);if(nlcb)nlcb(needed);cb();},eb);},"requirePrep":function(){},"itemReady":function(key,plist){var isready=key in CT.data.map;plist&&plist.forEach(function(p){isready=isready&&p in CT.data.map[key];});return isready;},"require":function(key,cb,plist,getpath,getparams,getprop){CT.data.requirePrep(key);if(CT.data.itemReady(key,plist))
cb(CT.data.get(key));else{getparams=getparams||{"gtype":"user","chat":1};getparams[getprop||"uid"]=key;CT.net.post(getpath||"/get",getparams,"error retrieving data",function(rawdata){CT.data.add(rawdata);cb(CT.data.get(key));});}},"requireAll":function(keys,cb,uid,plist,getpath,getparams,getprop){keys.forEach(CT.data.requirePrep);var needed=[];for(var i=0;i<keys.length;i++){if(!CT.data.itemReady(keys[i],plist))
needed.push(keys[i]);}
if(needed.length==0)
cb(keys);else{getparams=getparams||{"gtype":"user","chat":1};getparams[getprop||"uids"]=needed;CT.net.post(getpath||"/get",getparams,"error retrieving data",function(rawdata){CT.data.addSet(rawdata);cb(keys);});}}};;window.CT.trans=window.CT.trans||{};CT.trans={_:{vender_prefixes:["-webkit-","-moz-","-ms-","-o-",""],enames:["webkitTransitionEnd","mozTransitionEnd","oTransitionEnd","transitionend"],defaults:{trans:{duration:500,property:"*",ease:"ease-in-out"},rotate:{degrees:180,duration:1000,property:"transform",ease:"linear",prefix:true},translate:{duration:300,property:"transform",ease:"linear",prefix:true,x:0,y:0,z:0},wobble:{axis:"x",radius:50,duration:100},pan:{duration:5000,ease:"linear",x:0,y:0},resize:{duration:300,ease:"linear"},fadeIn:{duration:1600,property:"opacity",value:1},fadeOut:{duration:1600,property:"opacity",value:0},pulse:{wait:1000},invert:{direction:"horizontal",property:"transform",prefix:true}}},setVenderPrefixed:function(node,property,value){for(var i=0;i<CT.trans._.vender_prefixes.length;i++)
node.style[CT.trans._.vender_prefixes[i]+property]=value;},trans:function(opts){opts=CT.merge(opts,CT.trans._.defaults.trans);if(typeof opts.node=="string")
opts.node=CT.dom.id(opts.node);if(opts.node){var prevTrans=opts.node.style.transition||"",transComponent=opts.property+" "+opts.duration+"ms "+opts.ease,fullTrans=(prevTrans&&prevTrans.indexOf(transComponent)==-1)?(prevTrans+", "+transComponent):transComponent;CT.trans.setVenderPrefixed(opts.node,"transition",fullTrans);}
if(opts.cb){var transTimeout,wrapper=function(){opts.node&&CT.trans.setVenderPrefixed(opts.node,"transition",prevTrans);clearTimeout(transTimeout);transTimeout=null;if(opts.node)CT.trans._.enames.forEach(function(ename){opts.node.removeEventListener(ename,wrapper,false);});opts.cb();}
if(opts.node){CT.trans._.enames.forEach(function(ename){opts.node.addEventListener(ename,wrapper,false);});opts.node.finish=wrapper;}else
transTimeout=setTimeout(wrapper,opts.duration);}
if(opts.node&&opts.property&&opts.property!="*"){if(opts.prefix)
CT.trans.setVenderPrefixed(opts.node,opts.property,opts.value);else
opts.node.style[opts.property]=opts.value;}},invert:function(node,opts){opts=CT.merge(opts,CT.trans._.defaults.invert);opts.node=node;opts.value="scale"+(opts.direction=="horizontal"?"X":"Y")+"(-1)";CT.trans.trans(opts);return node;},rotate:function(node,opts){opts=CT.merge(opts,CT.trans._.defaults.rotate);opts.node=node;opts.value="rotate("+opts.degrees+"deg)";if(opts.forever)opts.cb=function(){opts.degrees+=CT.trans._.defaults.rotate.degrees;CT.trans.rotate(node,opts);};CT.trans.trans(opts);return node;},translate:function(node,opts){opts=CT.merge(opts,CT.trans._.defaults.translate);opts.node=node;if(opts.axis)
opts[opts.axis]=opts.value;opts.value="translate3d("+opts.x+"px,"+opts.y+"px,"+opts.z+"px)",CT.trans.trans(opts);},wobble:function(node,opts){opts=CT.merge(opts,CT.trans._.defaults.wobble);CT.trans.translate(node,{axis:opts.axis,ease:"ease-out",value:opts.radius,duration:opts.duration,cb:function(){CT.trans.translate(node,{axis:opts.axis,ease:"ease-in-out",value:-opts.radius,duration:opts.duration*2,cb:function(){CT.trans.translate(node,{axis:opts.axis,ease:"ease-in",value:0,duration:opts.duration});}});}});},pan:function(node,opts){opts=CT.merge(opts,CT.trans._.defaults.pan);var setV=function(cb){node._vertical=CT.dom.cover(node);node._prop=node._vertical?"y":"x",node._dim=node._vertical?"clientHeight":"clientWidth";node._bound=node.parentNode[node._dim]-node[node._dim];if(opts[node._prop]<node._bound){opts[node._prop]=0;node.finish&&node.finish();}
cb&&setTimeout(cb);},controllercb=function(){opts[node._prop]=opts[node._prop]?0:node._bound;CT.trans.translate(node,opts);},controller=new CT.trans.Controller(controllercb);node.onload=function(){var oldprop=node._prop;setV();if(oldprop&&oldprop!=node._prop)
opts[oldprop]=0;setTimeout(controller.resume);};CT.onresize(node.onload);opts.cb=controller.tick;return controller;},resize:function(node,opts){var width=opts.width,height=opts.height,cb=opts.cb;delete opts.width;delete opts.height;delete opts.cb;opts.node=node;opts=CT.merge(opts,CT.trans._.defaults.resize);if(width){CT.trans.trans(CT.merge({property:"width",value:width},opts));}
if(height){CT.trans.trans(CT.merge({property:"height",value:height},opts));}
if(cb){CT.trans.trans(CT.merge({cb:cb},opts));}},fadeIn:function(node,opts){opts=CT.merge(opts,CT.trans._.defaults.fadeIn);opts.node=node;CT.trans.trans(opts);},fadeOut:function(node,opts){opts=CT.merge(opts,CT.trans._.defaults.fadeOut);opts.node=node;CT.trans.trans(opts);},pulse:function(node,opts,wait){opts=CT.merge(opts,CT.trans._.defaults.pulse);var faded,controller=new CT.trans.Controller(function(){faded=!faded;if(faded){setTimeout(function(){CT.trans.fadeIn(node,opts);},opts.wait);}else
CT.trans.fadeOut(node,opts);});opts.cb=controller.tick;if(!wait)
controller.tick();return controller;}};CT.trans.Controller=CT.Class({CLASSNAME:"CT.trans.Controller",pause:function(){this._paused=true;},resume:function(){if(this._paused!=false){this._paused=false;if(this._stalled){this._stalled=false;this.cb();}}},active:function(){return!this._paused;},tick:function(){if(this.active())
this.cb();else
this._stalled=true;},init:function(cb){this.cb=cb;this._stalled=true;}});;window.CT.panel=window.CT.panel||{};CT.panel={"view1":{},"lastClicked":{},"accordion":function(data,triggerCb,activeClass,content,condition,notick,rmbutton,ricon,noactive){var n=CT.dom.node(null,null,"tabbed","ac"+data.name);n.add=function(tdata,makeFirst,addAlpha){var i,inserted,t=CT.panel.trigger(tdata,triggerCb,activeClass,content,condition,rmbutton,ricon,noactive);if(makeFirst)
n.insertBefore(t,n.firstChild);else if(addAlpha){for(i=0;i<n.childNodes.length;i++){if(n.childNodes[i].data.name>t.data.name){n.insertBefore(t,n.childNodes[i]);inserted=true;break;}}
if(!inserted)
n.appendChild(t);}else
n.appendChild(t);return t;};n._drops=[];n.expand=function(){n._drops.forEach(function(d){d.expand();});};n.retract=function(){n._drops.forEach(function(d){d.retract();});};data.forEach(function(d){if(d.children){var tick=CT.dom.node(">","div","inline-block"+(notick&&" hidden"||"")),t=CT.dom.node(),tline=[tick,CT.dom.link(content?content(d):d.name,null,null,"inline-block pointer acheader")];if(ricon)
tline.unshift(CT.dom.node(ricon(d),"div","right rpaddedsmall"));CT.dom.setContent(t,tline);t.content=CT.panel.accordion(d.children,triggerCb,activeClass,content,condition,notick,rmbutton,ricon,noactive);n.appendChild(t);n._drops.push(new CT.Drop({anchor:t,parent:n,relative:true,constrained:false,setNodeClick:false,content:t.content,onShow:function(){CT.trans.rotate(tick,{duration:100,degrees:90});},onHide:function(){CT.trans.rotate(tick,{duration:100,degrees:0});}}));}else
n.add(d);});return n;},"trigger":function(data,cb,activeClass,content,condition,rmbutton,ricon,noactive,hovs){var label=data.label||data.title||data.name||data.topic||data,key=data.key||label,hovcon=hovs&&hovs[label],n=CT.dom.node(null,"div","tlitem",key&&("tl"+key.replace(/ /g,"")));hovcon&&CT.hover.set({node:n,content:hovcon,auto:true});activeClass=activeClass||"activetab";n.data=data;data.node=n;n.select=function(){!noactive&&CT.dom.each(n.parentNode,function(c){if(c==n)
c.classList.add(activeClass);else
c.classList.remove(activeClass);c.className=(c==n)?activeClass:"";});};n.trigger=function(){if(condition&&!condition())return;n.select();cb(data);};n.remove=function(){CT.dom.remove(n);n.onRemove&&n.onRemove();};n.nameNode=CT.dom.link(content?content(data):label,n.trigger);n.rename=function(name){data.label=name;n.id="tl"+name.replace(/ /g,"");CT.dom.setContent(n.nameNode,name);};if(ricon)
n.appendChild(CT.dom.node(ricon(data),"div","right rpaddedsmall"));if(rmbutton)
n.appendChild(CT.dom.link("X",n.remove,null,"right"));n.appendChild(n.nameNode);return n;},"triggerList":function(data,cb,node,activeClass,content,condition,rmbutton,ricon,noactive,hovs){node=node||CT.dom.node();node.postAdd=function(d,trigger){var t=CT.panel.trigger(d,cb,activeClass,content,condition,rmbutton,ricon,noactive,hovs);node.appendChild(t);(trigger===true)&&t.trigger();};node.preAdd=function(d,trigger){var t=CT.panel.trigger(d,cb,activeClass,content,condition,rmbutton,ricon,noactive,hovs);if(node.childNodes.length)
node.insertBefore(t,node.firstChild);else
node.appendChild(t);trigger&&t.trigger();};data.forEach(node.postAdd);return node;},"slider":function(data,triggerNode,parentNode,ricon,activeClass,content,resize,hovs,clearz,ngen,tfirst){var node=CT.dom.div(null,"abs w1 hmin1 t0 l0 r0");if(typeof triggerNode=="string")
triggerNode=CT.dom.id(triggerNode);if(typeof parentNode=="string")
parentNode=CT.dom.id(parentNode);if(clearz){CT.dom.clear(parentNode);CT.dom.clear(triggerNode);}
(parentNode||document.body).appendChild(node);node._subs=[];node.slide=function(d){node._cur=d;CT.trans.translate(node,{y:-node.clientHeight*node._subs.indexOf(d)});};node.add=function(d,trigger){var n=CT.dom.div(null,"abs full l0 r0 scrolly"),t=CT.panel.trigger(d,node.slide,activeClass,content,null,null,ricon,null,hovs);n.style.top=(node.clientHeight*node._subs.length)+"px";if(ricon)
t.appendChild(CT.dom.div(null,"clearnode"));node._subs.push(d);node.appendChild(n);ngen&&CT.dom.setContent(n,ngen(d));triggerNode.appendChild(t);if((trigger===true)||(tfirst&&(trigger==0)))
t.trigger();return n;};data.forEach(node.add);resize&&CT.on("resize",function(){CT.dom.each(node,function(n,i){n.style.top=(node.clientHeight*i)+"px";});node._cur&&node.slide(node._cur);});return node;},"swap":function(key,trysidepanel,keystring,noitem){keystring=keystring||"sb";key=key.replace(/ /g,"");var items=CT.dom.className(keystring+"panel");for(var i=0;i<items.length;i++)
items[i].className=keystring+"panel hidden";CT.dom.id(keystring+"panel"+key,true).className=keystring+"panel";if(trysidepanel){var n=CT.dom.id(keystring+"panel"+key+"Side");if(n)n.className=keystring+"panel";var n2=CT.dom.id(keystring+"panel"+key+"Side2");if(n2)n2.className=keystring+"panel";}
if(!noitem)
CT.panel.select(key,keystring);var ksk=keystring+key;if(CT.panel.view1[ksk]){CT.panel.view1[ksk](key);delete CT.panel.view1[ksk];}},"drill":function(keymap){for(var k in keymap)
CT.panel.swap(keymap[k],false,k);},"select":function(key,keystring){keystring=keystring||"sb";var items=CT.dom.className(keystring+"item");for(var i=0;i<items.length;i++)
items[i].className=items[i].className.replace(" activetab","");if(key){CT.dom.id(keystring+"item"+key,true).className+=" activetab";CT.panel.lastClicked[keystring]=key;}
CT.mobile&&CT.mobile.mobileSnap();},"selectLister":function(newkey,oldkey,newhtml){if(oldkey)
CT.dom.id("ll"+oldkey).className="pointer";var newnode=CT.dom.id("ll"+newkey);newnode.className="pointer activetab";if(newhtml)
newnode.firstChild.innerHTML=newhtml;CT.mobile&&CT.mobile.mobileSnap();},"add":function(key,trysidepanel,keystring,itemnode,panelnode,nospace,icon,cb,condition,view1,clearcontent){nospace=nospace||key.replace(/ /g,"");keystring=keystring||"sb";if(!CT.dom.id(keystring+"panel"+nospace)){var n=CT.dom.node("","div",keystring+"panel hidden",keystring+"panel"+nospace);n.appendChild(CT.dom.node(key,"div","bigger blue bold bottompadded"));n.appendChild(CT.dom.node("","div","",keystring+"content"+nospace));(panelnode||CT.dom.id(keystring+"panels")).appendChild(n);}else if(clearcontent)
CT.dom.clear(keystring+"content"+nospace);var i=CT.dom.id(keystring+"item"+nospace);if(i)
i.style.display="block";else{itemnode=itemnode||CT.dom.id(keystring+"items");var clickfunc=function(){if(condition&&!condition())return;CT.panel.swap(nospace,trysidepanel,keystring);cb&&cb();};if(icon)
itemnode.appendChild(CT.dom.node(CT.dom.img(icon,null,clickfunc),"div","lfloat shiftleft"));itemnode.appendChild(CT.dom.node(CT.dom.link(key,clickfunc),"div",keystring+"item pointer",keystring+"item"+nospace));if(icon)
itemnode.appendChild(CT.dom.node("","div","clearnode"));}
if(view1)
CT.panel.view1[keystring+key]=view1;},"rename":function(oldkey,newkey,keystring,item2keystring){keystring=keystring||"sb";var nsold=oldkey.replace(/ /g,""),nsnew=newkey.replace(/ /g,""),item=CT.dom.id(keystring+"item"+nsold),panel=CT.dom.id(keystring+"panel"+nsold),content=CT.dom.id(keystring+"content"+nsold);item.id=keystring+"item"+nsnew;panel.id=keystring+"panel"+nsnew;if(content)content.id=keystring+"content"+nsnew;item.firstChild.innerHTML=panel.firstChild.innerHTML=newkey;var item2=item2keystring&&CT.dom.id(item2keystring+"item"+nsold);if(item2){item2.id=nsnew;item2.firstChild.innerHTML=newkey;}},"remove":function(key,keystring){var nospace=key.replace(/ /g,"");var p=CT.dom.id(keystring+"panel"+nospace);if(p)p.style.display="none";var l=CT.dom.id(keystring+"item"+nospace);if(l)l.style.display="none";},"load":function(pnames,trysidepanel,keystring,itemnode,panelnode,nospaces,icons,noclear,stillswap,cbs,condition,view1,clearcontent){keystring=keystring||"sb";if(!noclear)
(itemnode||CT.dom.id(keystring+"items")).innerHTML="";for(var i=0;i<pnames.length;i++)
CT.panel.add(pnames[i],trysidepanel,keystring,itemnode,panelnode,nospaces&&nospaces[i]||null,icons&&icons[i]||null,cbs&&cbs[i]||null,condition,view1,clearcontent);if(pnames.length&&(stillswap||(!itemnode&&!noclear)))
CT.panel.swap(pnames[0],trysidepanel,keystring);},"simple":function(pnames,keystring,itemnode,panelnode,cbs,condition,trysidepanel,nospaces,icons,noclear,stillswap,view1,clearcontent){if(arguments.length==1&&typeof arguments[0]!="string"){var obj=arguments[0];pnames=obj.pnames;keystring=obj.keystring;itemnode=obj.itemnode;panelnode=obj.panelnode;cbs=obj.cbs;condition=obj.condition;trysidepanel=obj.trysidepanel;nospaces=obj.nospaces;icons=obj.icons;noclear=obj.noclear;stillswap=obj.stillswap;view1=obj.view1;clearcontent=obj.clearcontent;}
CT.panel.load(pnames,trysidepanel,keystring,itemnode,panelnode,nospaces,icons,noclear,stillswap!=false,cbs,condition,view1,clearcontent);},"pager":function(getContent,request,limit,colClass,dataClass,ks){var keystring=ks||("p"+CT.Pager._id),content=CT.dom.node(null,null,dataClass,keystring+"panels"),sideBar=CT.dom.node(),pager=new CT.Pager(function(data){var dnames=data.map(function(d){return d.label;});CT.panel.simple(dnames,keystring,sideBar,content);data.forEach(function(d){CT.dom.setContent(CT.dom.id(keystring+"content"
+d.label.replace(/ /g,""),true),getContent(d));});return sideBar;},request,limit,colClass,keystring+"items"),n=CT.dom.node([pager.node,content]);n.pager=pager;return n;},"alternatebg":function(n,watchforicons,resetonbreak){n=n||document.getElementById("sbitems");if(watchforicons){var switcher=1;for(var i=0;i<n.childNodes.length;i++){var c=n.childNodes[i];if(c.className.indexOf("lfloat")==-1&&c.className.indexOf("clearnode")==-1){if(resetonbreak&&c.nodeName=="BR"){switcher=1;continue;}
if(switcher==1)
c.style.background="#899fb0";switcher*=-1;}}}
else{for(var i=0;i<n.childNodes.length;i+=2)
n.childNodes[i].style.background="#899fb0";}}};;window.CT.modal=window.CT.modal||{};CT.modal={_defs:{transition:"slide"},defaults:function(opts){CT.modal._defs=opts;},prompt:function(opts){(new CT.modal.Prompt(CT.merge(opts,{transition:"slide"}))).show();},choice:function(opts){CT.modal.prompt(CT.merge(opts,{noClose:true,defaultIndex:0,style:"single-choice"}));},modal:function(content,onhide,opts,closeOnClick){var mod=new CT.modal.Modal(CT.merge(opts,{content:content,onclick:closeOnClick&&function(){mod.hide();}},CT.modal._defs));if(onhide)mod.on.hide=onhide;mod.show();return mod;},img:function(src,onhide){return CT.modal.modal(CT.dom.img(src,"wm200p hm200p"),onhide);},close:function(){if(CT.modal.latest){CT.modal.latest.hide();delete CT.modal.latest;}}};CT.modal._defaults={Modal:{className:"basicpopup",innerClass:"h1 w1 scroller",transition:"none",center:true,noClose:false,onclick:null,slide:{origin:"top"}},LightBox:{className:"backdrop",innerClass:"lightbox",transition:"fade",caption:"",noClose:true,outerClose:true},Prompt:{className:"basicpopup mosthigh",style:"string",prompt:"",clear:false,data:[]}};CT.modal.Modal=CT.Class({CLASSNAME:"CT.modal.Modal",visible:false,setup:{_centerv:function(parent){var val=parent.clientHeight||CT.align.height();val-=this.node.clientHeight;return val/2;},_centerh:function(parent){var val=parent.clientWidth||CT.align.width();val-=this.node.clientWidth;return val/2;},_fallbacks:function(parent,force){var n=this.node;if(force||(!n.style.top&&!n.style.bottom))
n.style.top=this.setup._centerv(parent)+"px";if(force||(!n.style.left&&!n.style.right))
n.style.left=this.setup._centerh(parent)+"px";},_add:function(parent,nocenter){var n=this.node;parent=(parent instanceof Node)?parent:document.body;CT.dom.addContent(parent,n);this.opts.center&&!nocenter&&this.setup._fallbacks(parent);},none:function(){var n=this.node;n.show=this.setup._add;n.hide=function(){CT.dom.remove(n);};},fade:function(){var n=this.node,add=this.setup._add;n.show=function(parent){n.style.opacity=0;add(parent);setTimeout(function(){CT.trans.trans({node:n,property:"opacity",value:1});},100);};n.hide=function(){CT.trans.trans({node:n,property:"opacity",value:0,cb:function(){CT.dom.remove(n);}});};},slide:function(){var n=this.node,add=this.setup._add,origin=this.opts.slide.origin,center=this.opts.center,centerv=this.setup._centerv,centerh=this.setup._centerh,fallbacks=this.setup._fallbacks,ver=false,hor=false;var _refresh=function(parent,force){parent=(parent instanceof Node)?parent:document.body;["top","bottom"].forEach(function(side,sideIndex){if(origin.startsWith(side)){n.style[side]=-n.clientHeight+"px";n._vout={node:n,property:side,value:n.style[side]};n._vin={node:n,property:side,value:(center?centerv(parent):0)+"px"};ver=true;}});["left","right"].forEach(function(side,sideIndex){if(origin.endsWith(side)){n.style[side]=-n.clientWidth+"px";n._hout={node:n,property:side,value:n.style[side]};n._hin={node:n,property:side,value:(center?centerh(parent):0)+"px"};hor=true;}});fallbacks(parent,force);};n.show=function(parent){add(parent,true);n.recenter(parent,true);};n.hide=function(){ver&&CT.trans.trans(n._vout);hor&&CT.trans.trans(n._hout);CT.trans.trans({cb:function(){CT.dom.remove(n);}});};n.recenter=function(parent,noforce){_refresh(parent,!noforce);setTimeout(function(){ver&&CT.trans.trans(n._vin);hor&&CT.trans.trans(n._hin);},100);};}},on:{show:function(){},hide:function(){}},hide:function(){this.node.hide();this.visible=false;this.on.hide();},_show:function(n){this.node.show(n);this.visible=true;this.on.show();},show:function(n,cb){if(typeof n=="string")
n=CT.dom.id(n);setTimeout(this._show,0,n);cb&&setTimeout(cb,200);},showHide:function(n){this.visible?this.hide():this.show(n);},addClose:function(){this.node.insertBefore(CT.dom.div(CT.dom.link("X",this.hide),"abs ctr above"),this.node.firstChild);},build:function(){},clear:function(){this.node.lastChild.innerHTML="";},isClear:function(){return!this.node.lastChild.childElementCount;},add:function(content){CT.dom.addContent(this.node.lastChild,content);},set:function(node){this.clear();this.add(node);},_buildContent:function(){var opts=this.opts,nodeStyle={};["top","bottom","right","left"].forEach(function(side){if(side in opts.slide)
nodeStyle[side]=opts.slide[side];});this.node=CT.dom.div(CT.dom.div(null,opts.innerClass),opts.className,null,{onclick:opts.onclick},nodeStyle);if(!opts.noClose)
this.addClose();this.node.modal=this;this.setup[opts.transition]();this.build();if(opts.content||opts.node)
this.add(opts.content||opts.node);this.opts.recenter&&setTimeout(this.node.recenter,500);this.opts.resizeRecenter&&window.addEventListener("resize",this.node.recenter);},init:function(opts){this.opts=CT.merge(opts,CT.modal._defaults.Modal);setTimeout(this._buildContent);CT.modal.latest=this;}});CT.modal.LightBox=CT.Class({init:function(opts){var thiz=this;this.opts=opts=CT.merge(opts,{onclick:function(e){if(opts.outerClose&&(e.currentTarget==e.target))thiz.hide();},content:CT.dom.div(CT.dom.div(this.opts.caption,"biggest bold padded round translucent full-center white grayback pointer hoverglow"),"backdrop-img filler","",null,{backgroundImage:"url("+this.opts.img+")"})},CT.modal._defaults.LightBox,CT.modal._defaults.Modal);}},CT.modal.Modal);CT.modal.Prompt=CT.Class({CLASSNAME:"CT.modal.Prompt",_input:{string:function(){if(this.opts.autocomplete)
return CT.autocomplete.DBGuesser({rows:true,input:CT.dom.field(),tapCb:this.submitAC,property:this.opts.autocomplete.property,modelName:this.opts.autocomplete.modelName}).input;else{return CT.dom.smartField({cb:this.submit,isTA:this.opts.isTA,blurs:this.opts.blurs,classname:this.opts.inputClass});}},"multiple-string":function(){var fl=CT.dom.fieldList();this.node.appendChild(fl.empty);this.node.appendChild(fl.addButton);return fl;},password:function(){return CT.dom.smartField(this.submit,null,null,null,"password");},phone:function(){return CT.parse.numOnly(CT.dom.smartField(this.submit),false,true);},email:function(){return CT.dom.smartField(this.submit);},"single-choice":function(data){var cz=CT.dom.choices(this._nodify(data));if("defaultIndex"in this.opts)
cz.childNodes[this.opts.defaultIndex].onclick();return cz;},"multiple-choice":function(data){var selz=this.opts.selections,lnkz=this.opts.linkages,cz=CT.dom.choices(this._nodify(data),true,null,null,lnkz&&function(i){var val=data[i],trig;if(cz.value.includes(i)&&(val in lnkz)){for(trig of lnkz[val]){ti=data.indexOf(trig);cz.value.includes(ti)||cz.childNodes[ti].onclick();}}});selz&&CT.dom.each(cz,function(sel){if(selz.includes(sel.innerHTML))
sel.onclick();});return cz;},"reorder":function(data){return CT.dom.shuffler(data,this.opts.rower);},"file":function(){this.continueButton.disabled=true;return CT.file.getter(function(ctf){if(ctf.opts.path)
this.continueButton.disabled=false;}.bind(this));},"number":function(){return CT.dom.numberSelector(this.opts);},"time":function(){return CT.dom.timeSelector();},"date":function(data){var oz={update:true};if(data)oz.now=data;return(new CT.cal.Cal(oz)).node;},"form":function(data){return CT.layout.form({items:data,numbers:this.opts.numbers});},"icon":function(data){return CT.dom.iconSelector(data,true);},"sound":function(data){return CT.dom.soundSelector(data,true);}},on:{show:function(){this.input&&!this.opts.blurs&&this.input.focus();if(this.opts.clear)
this.input.value="";},hide:function(){}},submitAC:function(d){this.opts.cb(d);this.hide();},submit:function(){if(this.opts.style=="multiple-choice"){var that=this;this.opts.cb(this.input.value.map(function(val){return that.opts.data[val];}));}else{if(this.opts.style=="phone"&&this.input.value.length!=10)
return alert("please use a 10-digit phone number");else if(this.opts.style=="email"&&!CT.parse.validEmail(this.input.value))
return alert("please enter a valid email address");this.opts.cb(this.input&&(this.input.ctfile||((typeof this.input.value=="function")&&this.input.value())||this.opts.data[this.input.value]||this.input.value));}
this.hide();},_nodify:function(data){return data.map(function(d){if(typeof d=="string")
return CT.dom.node(d);else if(!(d instanceof Node))
return CT.dom.node(d.name||d.title||d.label);return d;});},build:function(){this.continueButton=CT.dom.button("Continue",this.submit);this.node.appendChild(CT.dom.node(this.opts.prompt));if(this.opts.style!="confirm"){this.input=this._input[this.opts.style](this.opts.data);this.node.appendChild(this.input);}
this.node.appendChild(this.continueButton);this.node.appendChild(CT.dom.button("Cancel",this.hide));},init:function(opts){this.opts=CT.merge(opts,CT.modal._defaults.Prompt,this.opts);}},CT.modal.Modal);;window.CT.pubsub=window.CT.pubsub||{};CT.pubsub={"_":{"ws":null,"b64":false,"args":null,"open":false,"initialized":false,"autohistory":false,"autohistory_exemptions":[],"reconnect":true,"reconnect_interval":250,"protocol":location.protocol=="http:"&&"ws"||"wss","log":CT.log.getLogger("CT.pubsub"),"queue":[],"channels":{},"cb":{"snapshot":CT.log.getLogger("CT.pubsub|snapshot"),"pm":CT.log.getLogger("CT.pubsub|pm"),"meta":CT.log.getLogger("CT.pubsub|meta"),"message":CT.log.getLogger("CT.pubsub|message"),"subscribe":CT.log.getLogger("CT.pubsub|subscribe"),"join":CT.log.getLogger("CT.pubsub|join"),"leave":CT.log.getLogger("CT.pubsub|leave"),"presence":CT.log.getLogger("CT.pubsub|presence"),"open":CT.log.getLogger("CT.pubsub|open"),"close":CT.log.getLogger("CT.pubsub|close"),"wserror":CT.log.getLogger("CT.pubsub|wserror"),"error":CT.log.getLogger("CT.pubsub|error")},"process":{"channel":function(data){var _=CT.pubsub._;if(data.meta){data.metamap={};data.presence.forEach(function(u,i){data.metamap[u]=data.meta[i];});}
_.channels[data.channel]=data;_.cb.subscribe(data);if(_.autohistory&&(_.autohistory_exemptions.indexOf(data.channel)==-1))
data.history.forEach(CT.pubsub._.process.publish);CT.pubsub._.cb.presence(data.presence.length,data.channel);},"meta":function(data){CT.pubsub._.channels[data.channel].metamap[data.user]=data.meta;CT.pubsub._.cb.meta(data);},"publish":function(data){CT.pubsub._.cb.message(data);},"subscribe":function(data){CT.pubsub._.cb.join(data.channel,data.user,data.meta);var chan=CT.pubsub._.channels[data.channel];if(chan){if(chan.metamap)
chan.metamap[data.user]=data.meta;CT.data.append(chan.presence,data.user);CT.pubsub._.cb.presence(chan.presence.length,data.channel);}},"unsubscribe":function(data){CT.pubsub._.cb.leave(data.channel,data.user);var chan=CT.pubsub._.channels[data.channel];if(chan){if(chan.metamap)
delete chan.metamap[data.user];CT.data.remove(chan.presence,data.user);CT.pubsub._.cb.presence(chan.presence.length,data.channel);}},"pm":function(data){CT.pubsub._.cb.pm(data.message,data.user);},"error":function(data){CT.pubsub._.cb.error(data.message);},"snapshot":function(data){CT.pubsub._.cb.snapshot(data);data.channels.forEach(function(c){var cdata=CT.pubsub._.channels[c.name]={channel:c.name,presence:c.users};CT.pubsub._.cb.subscribe(cdata);});}},"on":{"open":function(){CT.pubsub._.open=true;CT.pubsub._.reconnect_interval=250;CT.pubsub._.write({"action":"register","data":CT.pubsub._.args[2],"meta":CT.pubsub._.args[4]});for(var channel in CT.pubsub._.channels)
CT.pubsub.subscribe(channel);CT.pubsub._.queue.forEach(CT.pubsub._.write);CT.pubsub._.queue.length=0;CT.pubsub._.cb.open();},"close":function(){CT.pubsub._.open=false;CT.pubsub._.cb.close();if(CT.pubsub._.reconnect)
CT.pubsub._.try_reconnect()},"error":function(){CT.pubsub._.cb.wserror();},"message":function(msg){var _=CT.pubsub._,d=JSON.parse(_.b64?atob(msg.data):msg.data);_.process[d.action](d.data);}},"write":function(data){var _=CT.pubsub._;if(_.open){var dstring=JSON.stringify(data);_.ws.send(_.b64?btoa(dstring):dstring);}else
_.queue.push(data);},"try_reconnect":function(){var r_int=CT.pubsub._.reconnect_interval;CT.pubsub._.log("RECONNECT",r_int);setTimeout(function(){CT.pubsub.connect.apply(null,CT.pubsub._.args)},r_int);CT.pubsub._.reconnect_interval=Math.min(2*r_int,30000);}},"isInitialized":function(){return CT.pubsub._.initialized;},"set_b64":function(bool){CT.pubsub._.b64=bool;},"set_protocol":function(protocol){CT.pubsub._.protocol=protocol;},"set_reconnect":function(bool){CT.pubsub._.reconnect=bool;},"set_autohistory":function(bool,exemptions,mergeExemptions){CT.pubsub._.autohistory=bool;if(exemptions){if(mergeExemptions){exemptions.forEach(function(e){CT.pubsub._.autohistory_exemptions.push(e);});}else
CT.pubsub._.autohistory_exemptions=exemptions;}},"set_cb":function(action,cb){CT.pubsub._.cb[action]=cb;},"presence":function(channel){return CT.pubsub._.channels[channel].presence;},"pm":function(user,message){CT.pubsub._.write({"action":"pm","data":{"user":user,"message":message}});},"meta":function(channel,meta){CT.pubsub._.write({"action":"meta","data":{"channel":channel,"meta":meta}});},"publish":function(channel,message){CT.pubsub._.write({"action":"publish","data":{"channel":channel,"message":message}});},"subscribe":function(channel){CT.pubsub._.write({"action":"subscribe","data":channel});},"unsubscribe":function(channel){CT.pubsub._.write({"action":"unsubscribe","data":channel});},"connect":function(host,port,uname,onbeforeunload,meta){CT.pubsub._.args=arguments;CT.pubsub._.initialized=true;CT.pubsub._.ws=new WebSocket(CT.pubsub._.protocol+"://"+host+":"+port);for(var action in CT.pubsub._.on)
CT.pubsub._.ws["on"+action]=CT.pubsub._.on[action];window.addEventListener("beforeunload",function(){onbeforeunload&&onbeforeunload();CT.pubsub._.write({"action":"close"});});}};;window.CT.admin=window.CT.admin||{};window.CT.admin.core=window.CT.admin.core||{};CT.admin.core={q:function(action,cb,errMsg,params,path){params=params||{};params.pw=CT.admin.core._pw;params.action=action;CT.net.post(path||"/admin",params,errMsg,cb);},credcheck:function(eb,cb){CT.net.post("/_db",{action:"credcheck",pw:CT.admin.core._pw},null,cb,eb);},_init:function(pw){var c=CT.admin.core;c._pw=pw;if(c._skipinit){CT.admin.core.credcheck(function(msg){alert(msg);location=c._failpath||"/";},c._initcb);}else
c.q(c._mode,c._initcb,"failed to initialize "+c._mode);},init:function(mode,cb,skipinit,failpath){var c=CT.admin.core;if(c._initialized)return cb();c._mode=mode;c._initcb=function(data){c._initialized=true;cb(data);};c._skipinit=skipinit;c._failpath=failpath;CT.modal.Prompt({style:"password",prompt:"password?",transition:"fade",cb:c._init}).show();}};;window.CT.admin.pubsub=window.CT.admin.pubsub||{};CT.admin.pubsub={"onsnapshot":function(d){["bots","users","admins","channels"].forEach(function(s){CT.log("found "+d[s].length+" "+s);});CT.panel.simple(d.channels.map(function(c){return c.name;}),"ps");CT.admin.pubsub.chans={};d.channels.forEach(function(c){var content=CT.dom.id("pscontent"+c.name),nodes=CT.admin.pubsub.chans[c.name]={presence:CT.dom.div(c.users.map(function(u){return CT.dom.div(u,null,(c.name+u).replace(/ /g,""));}),"rcol"),messages:CT.dom.div(null,"data")};content.appendChild(nodes.presence);content.appendChild(nodes.messages);});},"onmessage":function(data){CT.admin.pubsub.chans[data.channel].messages.appendChild(CT.dom.node("<b>"+data.user+"</b>: "+JSON.stringify(data.message)));},"onjoin":function(channel,user){CT.admin.pubsub.chans[channel].presence.appendChild(CT.dom.div(user,null,(channel+user).replace(/ /g,"")));},"onleave":function(channel,user){CT.dom.remove((channel+user).replace(/ /g,""));},"init":function(){CT.admin.core.init("pubsub",function(loc){CT.pubsub.set_cb("message",CT.admin.pubsub.onmessage);CT.pubsub.set_cb("join",CT.admin.pubsub.onjoin);CT.pubsub.set_cb("leave",CT.admin.pubsub.onleave);CT.pubsub.set_cb("snapshot",CT.admin.pubsub.onsnapshot);CT.pubsub.connect(loc.host,loc.port,"__admin__"+Math.floor(Math.random()*1000)+btoa(CT.admin.core._pw));});}};;CT.onload(function(){CT.admin.pubsub.init();});;</script> </head><body><div id="psitems" class="rcol"></div><div id="pspanels" class="data"></div><noscript><div style="position: absolute; left:0px; top:0px;"> This site requires Javascript to function properly. To enable Javascript in your browser, please follow <a href="http://www.google.com/support/bin/answer.py?answer=23852">these instructions</a>. Thank you, and have a nice day. </div></noscript></body></html>